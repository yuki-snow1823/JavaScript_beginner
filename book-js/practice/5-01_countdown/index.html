<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="IE=edge">
  <title>template</title>
  <link href="../../_common/css/style.css" rel="stylesheet" type="text/css">
</head>

<body>
  <header>
    <div class="header-contents">
      <h1>タイトル</h1>
      <h2>サブタイトル</h2>
    </div><!-- /.header-contents -->
  </header>
  <div class="main-wrapper">
    <section>
      <p>今から、<span id="timer"></span>以内に注文すると50%OFF</p>
    </section>
  </div><!-- /.main-wrapper -->
  <footer>JavaScript Samples</footer>
</body>
<script>
  var countdown = function(due){
    var now = new Date();

    var rest = due.getTime() - now.getTime();
    // 何も入れていないから初期化したままだと現在時刻が入る
    var sec = Math.floor(rest / 1000 % 60);
    // ミリ秒を出して、60で割って、
    var min = Math.floor(rest / 1000 / 60 / 60) % 60;
    // ミリ秒を出して、60で割って、全体の「分」が出た。小数点以下が出たら１分に満たない秒なので、切り捨てる。それを60で割ると「分」…よくわからん。あまりを使う！だから％を使う。
    var hours = Math.floor(rest / 1000 / 60 / 60 ) % 24;
    var days = Math.floor(rest / 1000 / 60 / 60 / 24);
    var count = [days, hours, min, sec];

    return count;
  }

  var goal = new Date();
  goal.setHours(23);
  goal.setMinutes(59);
  goal.setSeconds(59);

  console.log(countdown(goal));


var recalc = function(){
  var counter = countdown(goal);
  var time = counter[1] + '時間' + counter[2] + '分' + counter[3] + '秒';
  document.getElementById('timer').textContent = time;
  refresh();
}

var refresh = function() {
  set.Timeout(recalc, 1000);
}

recalc();
// リフレッシュ後にまた起こるということ
</script>

</html>